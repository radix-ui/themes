/*
  Base Sidebar Layout and Container Styles
  - Slot containers: Root, Container, Header, Content, Footer, Separator
  - No visual variants here; only structure and slot-level primitives
  - Shared tokens defined/consumed: --sidebar-base-border-radius, etc.
*/

/* Removed Sidebar Provider (unused) */

/* Sidebar Root Container */
.rt-SidebarRoot {
  --sidebar-base-border-radius: 0; /* Default to no radius */

  width: 100%;
  height: 100%;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;

  /* Make sure Theme wrapper also participates in flex layout */
  & :where(.radix-themes) {
    display: flex;
    flex-direction: column;
    flex: 1;
    height: 100%;
  }
}

/* Sidebar Container */
.rt-SidebarContainer {
  --sidebar-base-border-radius: 0; /* Default to no radius */
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
  background-color: var(--color-panel);
  backdrop-filter: var(--backdrop-filter-panel);
  border-radius: inherit;
  flex: 1;
}

/* Sidebar Header */
.rt-SidebarHeader {
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  border-radius: var(--sidebar-base-border-radius) var(--sidebar-base-border-radius) 0 0;
}

/* Sidebar Content - based on rt-BaseMenuContent */
.rt-SidebarContent {
  --scrollarea-scrollbar-vertical-margin-top: var(--base-menu-content-padding);
  --scrollarea-scrollbar-vertical-margin-bottom: var(--base-menu-content-padding);
  --scrollarea-scrollbar-horizontal-margin-left: var(--base-menu-content-padding);
  --scrollarea-scrollbar-horizontal-margin-right: var(--base-menu-content-padding);

  display: flex;
  flex-direction: column;
  flex: 1;
  box-sizing: border-box;
  min-height: 0; /* Critical for flex children to shrink */

  /* Override base menu styling that's not appropriate for sidebars */
  background-color: transparent !important;
  backdrop-filter: none !important;
  box-shadow: none !important;
  border-radius: 0 !important;

  /* Step 2: stabilize text rasterization to avoid Chrome AA flicker */
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;

  /* Add gap between groups using flex */
  /* stylelint-disable-next-line selector-max-specificity */
  & .rt-BaseMenuViewport {
    /* gap: var(--base-menu-content-padding); */
    gap: var(--space-5);
  }

  /* Ensure ScrollArea takes full height within SidebarContent */
  & :where(.rt-ScrollAreaRoot) {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
  }

  & :where(.rt-ScrollAreaViewport) {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
  }

  /* Isolate painting to prevent cross-layer nudges */
  & :where(.rt-BaseMenuViewport) {
    contain: paint;
  }
}

/* Sidebar Footer */
.rt-SidebarFooter {
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  margin-top: auto;
  border-radius: 0 0 var(--sidebar-base-border-radius) var(--sidebar-base-border-radius);
}

/* Sidebar Separator - ensure full width and proper spacing */
.rt-SidebarSeparator {
  width: 100%;
  margin: var(--space-2) 0;
}

/* Removed mobile hide rule; Shell handles overlay vs inline */
