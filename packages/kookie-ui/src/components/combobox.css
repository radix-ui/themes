/* 
 * Combobox styles - optimized for performance.
 * Uses CSS :hover for visual feedback (disablePointerSelection enabled in JS).
 */
@import './_internal/base-menu.css';
@import './text-field.css';

/* Reset Popover.Content padding - base-menu handles padding via BaseMenuViewport */
.rt-ComboboxContent {
  padding: 0 !important;
  max-height: var(--radix-popover-content-available-height);
  display: flex;
  flex-direction: column;
}

/* Hide content when closed (forceMount keeps items mounted for label registration) */
.rt-ComboboxContent:where([data-state='closed']) {
  visibility: hidden;
  position: absolute;
  pointer-events: none;
}

.rt-ComboboxCommand {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
}

.rt-ComboboxViewport {
  padding-top: 0 !important;
}

/* Simplified scroll area - native overflow */
.rt-ComboboxScrollArea {
  flex: 1;
  min-height: 0;
  overflow: auto;
  max-height: 300px;
}

/* Override base-menu disabled styles for cmdk compatibility.
 * cmdk adds data-disabled="false" to enabled items, but base-menu.css
 * applies disabled styles to any element with [data-disabled] attribute.
 * This override restores normal appearance for enabled items. */
.rt-ComboboxItem:where([data-disabled="false"]) {
  color: inherit;
  cursor: var(--cursor-menu-item);
}

/* Size adjustments for items */
.rt-BaseMenuContent:where(.rt-r-size-1) :where(.rt-ComboboxItem) {
  --base-menu-item-padding-left: calc(var(--space-5) / 1.2);
}

.rt-BaseMenuContent:where(.rt-r-size-1) :where(.rt-ComboboxLabel) {
  --base-menu-item-padding-left: calc(var(--space-5) / 1.2);
}

.rt-BaseMenuContent:where(.rt-r-size-2) :where(.rt-ComboboxItem),
.rt-BaseMenuContent:where(.rt-r-size-3) :where(.rt-ComboboxItem) {
  --base-menu-item-padding-left: var(--space-5);
}

.rt-BaseMenuContent:where(.rt-r-size-2) :where(.rt-ComboboxLabel),
.rt-BaseMenuContent:where(.rt-r-size-3) :where(.rt-ComboboxLabel) {
  --base-menu-item-padding-left: var(--space-5);
}

/* Sticky search input */
.rt-ComboboxSearch {
  position: sticky;
  top: 0;
  z-index: 1;
  padding: var(--base-menu-content-padding);
  background-color: var(--color-panel);
}

:where([data-panel-background='translucent']) .rt-ComboboxSearch {
  background-color: var(--color-panel-translucent);
}

.rt-ComboboxSearch :where(.rt-ComboboxInputRoot) {
  width: 100%;
}

/* =============================================================================
 * HOVER STYLES - CSS-based hover for performance (disablePointerSelection)
 * These replace cmdk's React state-based [data-selected] on hover.
 * =============================================================================
 */

/* Base hover state - applies to all variants
 * Note: cmdk adds data-disabled="false" to enabled items, so we exclude only truly disabled items
 * :hover is inside :where() to maintain low specificity */
.rt-ComboboxItem:where(:not([data-disabled="true"], [data-disabled=""]):hover) {
  cursor: var(--cursor-menu-item);
}

/* Solid variant - hover */
:where(.rt-BaseMenuContent.rt-variant-solid) .rt-ComboboxItem:where(:not([data-disabled="true"], [data-disabled=""]):hover) {
  background-color: var(--accent-9);
  color: var(--accent-contrast);
}

:where(.rt-BaseMenuContent.rt-variant-solid) .rt-ComboboxItem:where(:not([data-disabled="true"], [data-disabled=""]):hover) * {
  color: var(--accent-contrast) !important;
}

/* Soft variant - hover */
:where(.rt-BaseMenuContent.rt-variant-soft) .rt-ComboboxItem:where(:not([data-disabled="true"], [data-disabled=""]):hover) {
  background-color: var(--accent-4);
}

:where([data-panel-background='translucent'] .rt-BaseMenuContent.rt-variant-soft) .rt-ComboboxItem:where(:not([data-disabled="true"], [data-disabled=""]):hover) {
  background-color: var(--accent-a4);
}

/* High contrast solid - hover */
:where(.rt-BaseMenuContent.rt-variant-solid.rt-high-contrast) .rt-ComboboxItem:where(:not([data-disabled="true"], [data-disabled=""]):hover) {
  background-color: var(--accent-12);
  color: var(--accent-1);
}

:where(.rt-BaseMenuContent.rt-variant-solid.rt-high-contrast) .rt-ComboboxItem:where(:not([data-disabled="true"], [data-disabled=""]):hover) * {
  color: var(--accent-1) !important;
}

/* High contrast solid with accent color - hover */
:where(.rt-BaseMenuContent.rt-variant-solid.rt-high-contrast[data-accent-color]) .rt-ComboboxItem:where(:not([data-disabled="true"], [data-disabled=""]):hover) {
  background-color: var(--accent-9);
  color: var(--accent-contrast);
}

:where(.rt-BaseMenuContent.rt-variant-solid.rt-high-contrast[data-accent-color]) .rt-ComboboxItem:where(:not([data-disabled="true"], [data-disabled=""]):hover) * {
  color: var(--accent-contrast) !important;
}

/* =============================================================================
 * KEYBOARD SELECTION STYLES - [data-selected] from cmdk keyboard navigation
 * These apply when using keyboard to navigate (arrow keys).
 * =============================================================================
 */

/* Solid variant - keyboard selected */
.rt-BaseMenuContent:where(.rt-variant-solid) :where(.rt-ComboboxItem[data-selected='true']) {
  background-color: var(--accent-9);
  color: var(--accent-contrast);
}

.rt-BaseMenuContent:where(.rt-variant-solid) :where(.rt-ComboboxItem[data-selected='true']) * {
  color: var(--accent-contrast) !important;
}

/* Soft variant - keyboard selected */
.rt-BaseMenuContent:where(.rt-variant-soft) :where(.rt-ComboboxItem[data-selected='true']) {
  background-color: var(--accent-4);
}

:where([data-panel-background='translucent'], [data-material='translucent']) .rt-BaseMenuContent:where(.rt-variant-soft) :where(.rt-ComboboxItem[data-selected='true']) {
  background-color: var(--accent-a4);
}

/* High contrast solid - keyboard selected */
.rt-BaseMenuContent:where(.rt-variant-solid.rt-high-contrast) :where(.rt-ComboboxItem[data-selected='true']) {
  background-color: var(--accent-12);
  color: var(--accent-1);
}

.rt-BaseMenuContent:where(.rt-variant-solid.rt-high-contrast) :where(.rt-ComboboxItem[data-selected='true']) * {
  color: var(--accent-1) !important;
}

/* High contrast solid with accent color - keyboard selected */
.rt-BaseMenuContent:where(.rt-variant-solid.rt-high-contrast[data-accent-color]) :where(.rt-ComboboxItem[data-selected='true']) {
  background-color: var(--accent-9);
  color: var(--accent-contrast);
}

.rt-BaseMenuContent:where(.rt-variant-solid.rt-high-contrast[data-accent-color]) :where(.rt-ComboboxItem[data-selected='true']) * {
  color: var(--accent-contrast) !important;
}

/* =============================================================================
 * DISABLED STYLES
 * =============================================================================
 */

/* Only match truly disabled items - cmdk sets data-disabled="false" for enabled items */
.rt-ComboboxItem:where([data-disabled="true"], [data-disabled=""]) {
  color: var(--gray-a8);
  cursor: default;
  pointer-events: none;
}

/* Empty state */
.rt-ComboboxEmpty {
  padding: var(--space-4);
  text-align: center;
  color: var(--gray-a11);
  font-size: var(--font-size-2);
}
