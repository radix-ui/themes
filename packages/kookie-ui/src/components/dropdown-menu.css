@import './_internal/base-menu.css';

.rt-DropdownMenuContent {
  max-height: var(--radix-dropdown-menu-content-available-height);
  transform-origin: var(--radix-dropdown-menu-content-transform-origin);
}

.rt-DropdownMenuTriggerIcon {
  flex-shrink: 0;

  /* Default size for when not in a sized button */
  width: var(--trigger-icon-size-default);
  height: var(--trigger-icon-size-default);
}

/***************************************************************************************************
 *                                                                                                 *
 * TRIGGER ICON RESPONSIVE SIZING                                                                  *
 *                                                                                                 *
 ***************************************************************************************************/

@breakpoints {
  /* Size 1 Button */
  .rt-Button:where(.rt-r-size-1) :where(.rt-DropdownMenuTriggerIcon) {
    width: var(--trigger-icon-size-1);
    height: var(--trigger-icon-size-1);
  }

  /* Size 2 Button */
  .rt-Button:where(.rt-r-size-2) :where(.rt-DropdownMenuTriggerIcon) {
    width: var(--trigger-icon-size-2);
    height: var(--trigger-icon-size-2);
  }

  /* Size 3 Button */
  .rt-Button:where(.rt-r-size-3) :where(.rt-DropdownMenuTriggerIcon) {
    width: var(--trigger-icon-size-3);
    height: var(--trigger-icon-size-3);
  }

  /* Size 4 Button */
  .rt-Button:where(.rt-r-size-4) :where(.rt-DropdownMenuTriggerIcon) {
    width: var(--trigger-icon-size-4);
    height: var(--trigger-icon-size-4);
  }
}

/***************************************************************************************************
 *                                                                                                 *
 * DRILL-DOWN MODE                                                                                  *
 *                                                                                                 *
 ***************************************************************************************************/

/* Root container that holds the main menu items */
.rt-DropdownMenuDrillDownRoot {
  display: contents;
}

/* When a submenu is active, hide the ROOT's direct children (but not nested panels) */
.rt-DropdownMenuDrillDownRoot:where([data-drill-down-active]) > * {
  display: none !important;
}

/* Keep nested panels visible (they use display: contents) */
.rt-DropdownMenuDrillDownRoot:where([data-drill-down-active]) > :where(.rt-DropdownMenuDrillDownPanel) {
  display: contents !important;
}

/* Submenu panel in drill-down mode */
.rt-DropdownMenuDrillDownPanel {
  display: contents;
}

/* Hide children of INACTIVE drill-down panels */
.rt-DropdownMenuDrillDownPanel:where(:not([data-drill-down-active])) > * {
  display: none !important;
}

/* But keep nested panels visible (they use display: contents) */
.rt-DropdownMenuDrillDownPanel:where(:not([data-drill-down-active])) > :where(.rt-DropdownMenuDrillDownPanel) {
  display: contents !important;
}

/* Back button item */
.rt-DropdownMenuDrillDownBackItem {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  min-height: var(--base-menu-item-height);
  padding-top: var(--base-menu-item-padding-y);
  padding-bottom: var(--base-menu-item-padding-y);
  padding-inline-start: var(--base-menu-item-padding-left);
  padding-inline-end: var(--base-menu-item-padding-right);
  box-sizing: border-box;
  outline: none;
  cursor: var(--cursor-menu-item);
  user-select: none;
  transition: var(--transition-menu);
  font-weight: 500;

  &:where(:focus-visible) {
    outline: 2px solid var(--focus-8);
    outline-offset: -2px;
  }

  /* Enhanced reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

/* Back icon */
.rt-DropdownMenuDrillDownBackIcon {
  width: var(--indicator-icon-size-2);
  height: var(--indicator-icon-size-2);
  flex-shrink: 0;
  color: var(--gray-12);
}

/* Back label */
.rt-DropdownMenuDrillDownBackLabel {
  color: var(--gray-12);
}

/* Solid variant - drill-down items hover (matches menu item [data-highlighted]) */
.rt-BaseMenuContent:where(.rt-variant-solid) {
  & :where(.rt-DropdownMenuDrillDownBackItem:hover),
  & :where(.rt-DropdownMenuDrillDownBackItem:focus-visible),
  & :where(.rt-DropdownMenuDrillDownSubTrigger:hover),
  & :where(.rt-DropdownMenuDrillDownSubTrigger:focus-visible) {
    background-color: var(--accent-9);
    color: var(--accent-contrast);

    & :where(.rt-DropdownMenuDrillDownBackIcon),
    & :where(.rt-DropdownMenuDrillDownBackLabel),
    & :where(.rt-BaseMenuSubTriggerIcon) {
      color: var(--accent-contrast);
    }
  }
}

/* Soft variant - drill-down items hover (matches menu item [data-highlighted]) */
.rt-BaseMenuContent:where(.rt-variant-soft) {
  & :where(.rt-DropdownMenuDrillDownBackItem:hover),
  & :where(.rt-DropdownMenuDrillDownBackItem:focus-visible),
  & :where(.rt-DropdownMenuDrillDownSubTrigger:hover),
  & :where(.rt-DropdownMenuDrillDownSubTrigger:focus-visible) {
    background-color: var(--accent-4);
  }

  :where([data-panel-background='translucent']) & :where(.rt-DropdownMenuDrillDownBackItem:hover),
  :where([data-panel-background='translucent']) & :where(.rt-DropdownMenuDrillDownBackItem:focus-visible),
  :where([data-panel-background='translucent']) & :where(.rt-DropdownMenuDrillDownSubTrigger:hover),
  :where([data-panel-background='translucent']) & :where(.rt-DropdownMenuDrillDownSubTrigger:focus-visible) {
    background-color: var(--accent-a4);
  }
}

/* Forced colors support */
@media (forced-colors: active) {
  .rt-DropdownMenuDrillDownBackItem:where(:focus-visible) {
    outline: 2px solid Highlight;
    outline-offset: 2px;
  }
}

/***************************************************************************************************
 *                                                                                                 *
 * DRILL-DOWN ANIMATIONS                                                                           *
 *                                                                                                 *
 ***************************************************************************************************/

@media (prefers-reduced-motion: no-preference) {
  /* Active panel items animate in based on direction */
  .rt-DropdownMenuDrillDownPanel:where([data-drill-down-active][data-animation-direction='forward']) > :where(*:not(.rt-DropdownMenuDrillDownPanel)) {
    animation: rt-drill-down-enter-from-right var(--motion-duration-small) var(--motion-ease-smooth);
  }

  .rt-DropdownMenuDrillDownPanel:where([data-drill-down-active][data-animation-direction='backward']) > :where(*:not(.rt-DropdownMenuDrillDownPanel)) {
    animation: rt-drill-down-enter-from-left var(--motion-duration-small) var(--motion-ease-smooth);
  }

  /* Root items animate when returning from a submenu */
  .rt-DropdownMenuDrillDownRoot:where(:not([data-drill-down-active])[data-animation-direction='backward']) > :where(*:not(.rt-DropdownMenuDrillDownPanel)) {
    animation: rt-drill-down-enter-from-left var(--motion-duration-small) var(--motion-ease-smooth);
  }
}
